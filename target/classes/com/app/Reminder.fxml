<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.shape.Rectangle?>

<AnchorPane prefHeight="700.0" prefWidth="400.0"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.app.Reminder.ReminderController"
            style="-fx-background-color: #165497ff;">

    <children>
        <!-- BAGIAN ATAS - BIRU -->
        <VBox alignment="TOP_CENTER" prefHeight="200.0" prefWidth="400.0"
              style="-fx-background-color: linear-gradient(to bottom, #0d47a1, #1565c0);"
              AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">

            <padding>
                <Insets bottom="20" left="20" right="20" top="30"/>
            </padding>

            <children>
                <!-- Header dengan Tombol Kembali -->
                <HBox alignment="CENTER_LEFT" prefHeight="50.0" prefWidth="360.0">
                    <children>
                        <!-- Tombol Kembali -->
                        <Button onAction="#handleBack"
                                style="-fx-background-color: rgba(193, 218, 255, 0.85); 
                                       -fx-text-fill: #0d47a1;
                                       -fx-background-radius: 20;
                                       -fx-cursor: hand;
                                       -fx-padding: 5 15;
                                       -fx-font-weight: bold;"
                                prefWidth="90">
                            <graphic>
                                <HBox alignment="CENTER" spacing="8">
                                    <ImageView fitHeight="14" fitWidth="14" preserveRatio="true">
                                        <Image url="https://img.icons8.com/ios-filled/50/0d47a1/back.png"/>
                                    </ImageView>
                                    <Label text="Kembali" style="-fx-text-fill: #0d47a1; -fx-font-weight: bold; -fx-font-size: 13px;"/>
                                </HBox>
                            </graphic>
                        </Button>
                        
                        <Region HBox.hgrow="ALWAYS"/>
                        
                        <!-- Judul Reminder -->
                        <HBox alignment="CENTER" spacing="10">
                            <ImageView fitHeight="24" fitWidth="24" preserveRatio="true">
                                <Image url="https://img.icons8.com/ios-filled/50/ffffff/alarm.png"/>
                            </ImageView>
                            <Label text="Reminder" 
                                   style="-fx-text-fill: white; 
                                          -fx-font-size: 26px; 
                                          -fx-font-weight: bold;">
                                <font>
                                    <Font name="System Bold" size="26.0"/>
                                </font>
                            </Label>
                        </HBox>
                        
                        <Region HBox.hgrow="ALWAYS"/>
                        <Region prefWidth="90"/>
                    </children>
                </HBox>

                <!-- Deskripsi -->
                <VBox alignment="CENTER" spacing="5">
                    <Label text="Kelola tagihan dan riwayat pembayaran"
                           style="-fx-text-fill: rgba(255, 255, 255, 0.95); 
                                  -fx-font-size: 14px;
                                  -fx-font-weight: 500;"
                           alignment="CENTER" />
                </VBox>

            </children>
        </VBox>

        <!-- TOGGLE REMINDER/RIWAYAT -->
        <HBox alignment="CENTER" layoutY="180" prefWidth="400.0"
              style="-fx-background-color: #e8f4fd;">
            <HBox alignment="CENTER" spacing="0" 
                  style="-fx-background-color: #d0e4f5; 
                         -fx-background-radius: 20;
                         -fx-padding: 5;
                         -fx-margin: 20;">
                <Button fx:id="btnReminder" text="Reminder Aktif" 
                        onAction="#showReminder"
                        style="-fx-background-color: white; 
                               -fx-text-fill: #1f5bb4ff;
                               -fx-font-weight: bold;
                               -fx-background-radius: 15;
                               -fx-padding: 8 30;
                               -fx-cursor: hand;"
                        prefWidth="180"/>
                <Button fx:id="btnRiwayat" text="Riwayat" 
                        onAction="#showRiwayat"
                        style="-fx-background-color: transparent; 
                               -fx-text-fill: #1f5bb4ff;
                               -fx-font-weight: bold;
                               -fx-background-radius: 15;
                               -fx-padding: 8 30;
                               -fx-cursor: hand;"
                        prefWidth="180"/>
            </HBox>
        </HBox>

        <!-- KONTEN UTAMA (StackPane untuk toggle) -->
        <StackPane fx:id="contentPane" layoutY="230" prefHeight="470.0" prefWidth="400.0"
                   style="-fx-background-color: #e8f4fd;"
                   AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">

            <!-- SCENE 1: REMINDER AKTIF -->
            <VBox fx:id="reminderContent" alignment="TOP_CENTER" spacing="20" 
                  prefWidth="400.0" prefHeight="470.0">
                <padding>
                    <Insets top="0" bottom="20" left="20" right="20"/>
                </padding>

                <children>
                    <!-- Form Tambah Reminder -->
                    <VBox spacing="15" alignment="CENTER" prefWidth="360"
                          style="-fx-background-color: #f8fbff;
                                 -fx-background-radius: 20;
                                 -fx-border-color: #c5d9f0;
                                 -fx-border-radius: 20;
                                 -fx-border-width: 1.5;
                                 -fx-padding: 20;">
                        
                        <Label text="Tambah Reminder Baru"
                               style="-fx-text-fill: #1f5bb4ff; 
                                      -fx-font-size: 16px; 
                                      -fx-font-weight: bold;" />
                        
                        <!-- Input Jenis Tagihan -->
                        <VBox spacing="5" prefWidth="320">
                            <Label text="Jenis Tagihan" 
                                   style="-fx-text-fill: #1f5bb4ff; 
                                          -fx-font-size: 12px;
                                          -fx-font-weight: bold;" />
                            <TextField fx:id="txtJenis" 
                                       promptText="Contoh: Bayar Listrik PLN, Internet, dll"
                                       style="-fx-background-radius: 10; 
                                              -fx-border-radius: 10; 
                                              -fx-border-color: #b8d4f5;
                                              -fx-border-width: 1.5;
                                              -fx-background-color: white; 
                                              -fx-padding: 10 15; 
                                              -fx-font-size: 13px;"
                                       prefWidth="320" />
                        </VBox>
                        
                        <!-- Input Nominal -->
                        <VBox spacing="5" prefWidth="320">
                            <Label text="Nominal (Rp)" 
                                   style="-fx-text-fill: #1f5bb4ff; 
                                          -fx-font-size: 12px;
                                          -fx-font-weight: bold;" />
                            <TextField fx:id="txtNominal" 
                                       promptText="Contoh: 500000"
                                       style="-fx-background-radius: 10; 
                                              -fx-border-radius: 10; 
                                              -fx-border-color: #b8d4f5;
                                              -fx-border-width: 1.5;
                                              -fx-background-color: white; 
                                              -fx-padding: 10 15; 
                                              -fx-font-size: 13px;"
                                       prefWidth="320" />
                        </VBox>
                        
                        <!-- Input Tanggal Jatuh Tempo -->
                        <VBox spacing="5" prefWidth="320">
                            <Label text="Tanggal Jatuh Tempo" 
                                   style="-fx-text-fill: #1f5bb4ff; 
                                          -fx-font-size: 12px;
                                          -fx-font-weight: bold;" />
                            <DatePicker fx:id="dateJatuhTempo" 
                                        promptText="Pilih tanggal"
                                        style="-fx-background-radius: 10; 
                                               -fx-border-radius: 10; 
                                               -fx-background-color: white;
                                               -fx-border-color: #b8d4f5;
                                               -fx-border-width: 1.5;
                                               -fx-pref-height: 40;"
                                        prefWidth="320" />
                        </VBox>
                        
                        <!-- Tombol Tambah -->
                        <Button text="âž• TAMBAH REMINDER" 
                                onAction="#handleAddReminder"
                                style="-fx-background-color: linear-gradient(to right, #1f5bb4ff, #2d6bc5); 
                                       -fx-text-fill: white; 
                                       -fx-font-size: 13px;
                                       -fx-font-weight: bold;
                                       -fx-background-radius: 12;
                                       -fx-cursor: hand;
                                       -fx-padding: 10 0;"
                                prefWidth="320" 
                                prefHeight="40">
                            <VBox.margin>
                                <Insets top="5"/>
                            </VBox.margin>
                        </Button>
                        
                    </VBox>
                    
                    <!-- Daftar Reminder Aktif -->
                    <VBox spacing="10" prefWidth="360">
                        <HBox alignment="CENTER_LEFT" spacing="8">
                            <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                                <Image url="https://img.icons8.com/ios-filled/50/1f5bb4/alarm.png"/>
                            </ImageView>
                            <Label text="Tagihan Aktif"
                                   style="-fx-text-fill: #1f5bb4ff; 
                                          -fx-font-size: 16px; 
                                          -fx-font-weight: bold;" />
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="lblJumlahAktif" text="0 tagihan"
                                   style="-fx-text-fill: #5a7ab0; 
                                          -fx-font-size: 12px;" />
                        </HBox>
                        
                        <!-- ListView Reminder Aktif -->
                        <ListView fx:id="listReminder" 
                                  prefHeight="150"
                                  prefWidth="360"
                                  style="-fx-background-color: white;
                                         -fx-background-radius: 15;
                                         -fx-control-inner-background: white;
                                         -fx-control-inner-background-radius: 15;
                                         -fx-border-color: #b8d4f5;
                                         -fx-border-radius: 15;
                                         -fx-border-width: 1.5;
                                         -fx-padding: 5;">
                            <padding>
                                <Insets top="8" right="8" bottom="8" left="8"/>
                            </padding>
                        </ListView>
                        
                        <!-- Info Kosong Reminder Aktif -->
                        <VBox fx:id="boxAktifKosong" alignment="CENTER" spacing="8" 
                              style="-fx-padding: 20 0;" visible="false">
                            <ImageView fitHeight="40" fitWidth="40" preserveRatio="true">
                                <Image url="https://img.icons8.com/ios-filled/50/a0c4ff/checked-checkbox.png"/>
                            </ImageView>
                            <Label text="Tidak ada tagihan aktif"
                                   style="-fx-text-fill: #a0c4ff; 
                                          -fx-font-size: 13px;
                                          -fx-font-style: italic;" />
                        </VBox>
                    </VBox>
                </children>
            </VBox>

            <!-- SCENE 2: RIWAYAT (awalnya tersembunyi) -->
            <VBox fx:id="riwayatContent" alignment="TOP_CENTER" spacing="15" 
                  prefWidth="400.0" prefHeight="470.0" visible="false">
                <padding>
                    <Insets top="0" bottom="20" left="20" right="20"/>
                </padding>

                <children>
                    <!-- Header Riwayat -->
                    <VBox spacing="5" prefWidth="360">
                        <HBox alignment="CENTER_LEFT" spacing="8">
                            <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                                <Image url="https://img.icons8.com/ios-filled/50/1f5bb4/history.png"/>
                            </ImageView>
                            <Label text="Riwayat Pembayaran"
                                   style="-fx-text-fill: #1f5bb4ff; 
                                          -fx-font-size: 16px; 
                                          -fx-font-weight: bold;" />
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="lblJumlahRiwayat" text="0 pembayaran"
                                   style="-fx-text-fill: #5a7ab0; 
                                          -fx-font-size: 12px;" />
                        </HBox>
                    </VBox>
                    
                    <!-- ListView Riwayat -->
                    <ListView fx:id="listRiwayat" 
                              prefHeight="280"
                              prefWidth="360"
                              style="-fx-background-color: white;
                                     -fx-background-radius: 15;
                                     -fx-control-inner-background: white;
                                     -fx-control-inner-background-radius: 15;
                                     -fx-border-color: #b8d4f5;
                                     -fx-border-radius: 15;
                                     -fx-border-width: 1.5;
                                     -fx-padding: 5;">
                        <padding>
                            <Insets top="8" right="8" bottom="8" left="8"/>
                        </padding>
                    </ListView>
                    
                    <!-- Info Kosong Riwayat -->
                    <VBox fx:id="boxRiwayatKosong" alignment="CENTER" spacing="8" 
                          style="-fx-padding: 40 0;" visible="false">
                        <ImageView fitHeight="48" fitWidth="48" preserveRatio="true">
                            <Image url="https://img.icons8.com/ios-filled/50/a0c4ff/file.png"/>
                        </ImageView>
                        <Label text="Belum ada riwayat pembayaran"
                               style="-fx-text-fill: #a0c4ff; 
                                      -fx-font-size: 13px;
                                      -fx-font-style: italic;" />
                        <Label text="Semua tagihan yang sudah dibayar akan muncul di sini"
                               style="-fx-text-fill: #a0c4ff; 
                                      -fx-font-size: 11px;" />
                    </VBox>
                    
                    <!-- Statistik Riwayat -->
                    <HBox spacing="15" alignment="CENTER" prefWidth="360"
                          style="-fx-background-color: #f8fbff;
                                 -fx-background-radius: 12;
                                 -fx-border-color: #c5d9f0;
                                 -fx-border-radius: 12;
                                 -fx-border-width: 1;
                                 -fx-padding: 12;">
                        <VBox alignment="CENTER" spacing="3">
                            <Label text="Total Dibayar" 
                                   style="-fx-text-fill: #5a7ab0; 
                                          -fx-font-size: 11px;" />
                            <Label fx:id="lblTotalDibayar" text="Rp 0" 
                                   style="-fx-text-fill: #1f5bb4ff; 
                                          -fx-font-size: 14px;
                                          -fx-font-weight: bold;" />
                        </VBox>
                        <Separator orientation="VERTICAL" 
                                   style="-fx-background-color: #c5d9f0;"/>
                        <VBox alignment="CENTER" spacing="3">
                            <Label text="Tagihan Selesai" 
                                   style="-fx-text-fill: #5a7ab0; 
                                          -fx-font-size: 11px;" />
                            <Label fx:id="lblTagihanSelesai" text="0" 
                                   style="-fx-text-fill: #1f5bb4ff; 
                                          -fx-font-size: 14px;
                                          -fx-font-weight: bold;" />
                        </VBox>
                        <!-- Tambahkan/update di Reminder.fxml -->
                        <!-- Bagian toggle sudah ada, pastikan event handlers terhubung -->
                        <HBox alignment="CENTER" layoutY="180" prefWidth="400.0"
                            style="-fx-background-color: #e8f4fd;">
                            <HBox alignment="CENTER" spacing="0" 
                                style="-fx-background-color: #d0e4f5; 
                                        -fx-background-radius: 20;
                                        -fx-padding: 5;
                                        -fx-margin: 20;">
                                <Button fx:id="btnReminder" text="Reminder Aktif" 
                                        onAction="#showReminder"
                                        style="-fx-background-color: white; 
                                            -fx-text-fill: #1f5bb4ff;
                                            -fx-font-weight: bold;
                                            -fx-background-radius: 15;
                                            -fx-padding: 8 30;
                                            -fx-cursor: hand;"
                                        prefWidth="180"/>
                                <Button fx:id="btnRiwayat" text="Riwayat" 
                                        onAction="#showRiwayat"
                                        style="-fx-background-color: transparent; 
                                            -fx-text-fill: #1f5bb4ff;
                                            -fx-font-weight: bold;
                                            -fx-background-radius: 15;
                                            -fx-padding: 8 30;
                                            -fx-cursor: hand;"
                                        prefWidth="180"/>
                            </HBox>
                        </HBox>
                    </HBox>
                </children>
            </VBox>

        </StackPane>
    </children>
</AnchorPane>